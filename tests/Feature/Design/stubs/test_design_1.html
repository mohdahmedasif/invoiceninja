<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice</title>
    <style>
        @page {
            size: 210mm 297mm;
            margin: 10mm 10mm 10mm 10mm;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Inter, sans-serif;
            font-size: 12px;
            color: #374151;
            line-height: 1.5;
            background-color: #ffffff;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        .invoice-container {
            width: 794px;
            background: #ffffff;
            margin: 0 auto;
            padding: 30px 30px;
        }
        .row {
            display: block;
            margin-bottom: 10px;
            width: 100%;
            clear: both;
        }
        .row::after {
            content: "";
            display: table;
            clear: both;
        }
        .row.flex-row {
            display: flex;
            flex-wrap: nowrap;
            align-items: flex-start;
        }
        .block {
            box-sizing: border-box;
            overflow: visible;
        }
        .block.full-width {
            width: 100% !important;
            display: block;
            float: none;
            clear: both;
        }
        .row.flex-row .block {
            flex-shrink: 0;
            flex-grow: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table tr {
            page-break-inside: avoid;
        }
        .block p, .block div {
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        /* Page break utilities */
        .page-break-before {
            page-break-before: always;
            break-before: page;
        }
        .page-break-after {
            page-break-after: always;
            break-after: page;
        }
        .page-break-avoid {
            page-break-inside: avoid;
            break-inside: avoid;
        }
        /* Repeat on every page (for headers/footers) */
        .repeat-header {
            display: table-header-group;
        }
        .repeat-footer {
            display: table-footer-group;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .invoice-container {
                margin: 0;
            }
            .block {
                break-inside: avoid;
                box-shadow: none !important;
            }
            .page-break-before {
                page-break-before: always !important;
                break-before: page !important;
            }
            .page-break-after {
                page-break-after: always !important;
                break-after: page !important;
            }
        }
    </style>
</head>
<body>
    <div class="invoice-container">
        <div class="row flex-row" style="justify-content: center;"><div class="block" style="width: 50%; min-height: 120px;"><div style="text-align: center; height: 100%; display: flex; align-items: center; justify-content: center;"><img src="$company.logo" style="max-width: 150px; max-height: 100%; object-fit: contain;" alt="logo" /></div></div>
</div>
<div class="row flex-row" style="gap: 10px;"><div class="block" style="width: 33.333333333333%; min-height: 180px;"><div style="font-size: 12px; line-height: 1.6; text-align: left; color: #374151; white-space: pre-line;">$company.name<br />
$company.address<br />
$company.city_state_postal<br />
$company.phone<br />
$company.email</div></div>
<div class="block" style="width: 33.333333333333%; min-height: 180px;"><div><div style="font-size: 12px; font-weight: bold; color: #374151; margin-bottom: 8px;">Bill To:</div><div style="font-size: 12px; line-height: 1.6; text-align: left; color: #374151; white-space: pre-line;">$client.name<br />
$client.address<br />
$client.city_state_postal<br />
$client.phone<br />
$client.email</div></div></div>
</div>
<div class="row" style=""><div class="block full-width" style="min-height: 60px;"><hr style="border: none; border-top: 1px solid #E5E7EB; margin-top: 10px; margin-bottom: 10px;" /></div>
</div>
<div class="row flex-row" style="justify-content: flex-end;"><div class="block" style="width: 25%; min-height: 180px;"><div style="font-size: 12px; line-height: 1.8; text-align: left; color: #374151; white-space: pre-line;">Invoice #: $invoice.number<br />
Date: $invoice.date<br />
Due Date: $invoice.due_date<br />
PO Number: $invoice.po_number</div></div>
</div>
<div class="row" style=""><div class="block full-width"><table style="width: 100%; border-collapse: collapse; font-size: 12px;"><thead><tr style="background: #F3F4F6; color: #111827; font-weight: bold;"><th style="padding: 8px; text-align: left; width: 25%; border: 1px solid #E5E7EB;">Item</th><th style="padding: 8px; text-align: left; width: 30%; border: 1px solid #E5E7EB;">Description</th><th style="padding: 8px; text-align: center; width: 10%; border: 1px solid #E5E7EB;">Qty</th><th style="padding: 8px; text-align: right; width: 15%; border: 1px solid #E5E7EB;">Rate</th><th style="padding: 8px; text-align: right; width: 15%; border: 1px solid #E5E7EB;">Amount</th></tr></thead><tbody><ninja>{% set invoice = invoices|first %}{% for item in invoice.line_items %}<tr style="background: {{ loop.index is even ? '#F9FAFB' : '#FFFFFF' }};"><td style="padding: 8px; text-align: left; border: 1px solid #E5E7EB;">{{ item.product_key }}</td><td style="padding: 8px; text-align: left; border: 1px solid #E5E7EB;">{{ item.notes }}</td><td style="padding: 8px; text-align: center; border: 1px solid #E5E7EB;">{{ item.quantity }}</td><td style="padding: 8px; text-align: right; border: 1px solid #E5E7EB;">{{ item.cost }}</td><td style="padding: 8px; text-align: right; border: 1px solid #E5E7EB;">{{ item.line_total }}</td></tr>{% endfor %}</ninja></tbody></table></div>
</div>
<div class="row flex-row" style="justify-content: flex-end;"><div class="block" style="width: 50%;"><table style="border-collapse: collapse; margin-left: auto;"><tbody><tr style="font-size: 13px; font-weight: normal;"><td style="color: #6B7280; text-align: right; white-space: nowrap; padding-right: 20px; padding-bottom: 8px;">Subtotal:</td><td style="color: #111827; text-align: right; white-space: nowrap; padding-bottom: 8px;">$invoice.subtotal</td></tr><tr style="font-size: 13px; font-weight: normal;"><td style="color: #6B7280; text-align: right; white-space: nowrap; padding-right: 20px; padding-bottom: 8px;">Discount:</td><td style="color: #111827; text-align: right; white-space: nowrap; padding-bottom: 8px;">$invoice.discount</td></tr><tr style="font-size: 13px; font-weight: normal;"><td style="color: #6B7280; text-align: right; white-space: nowrap; padding-right: 20px; padding-bottom: 8px;">Tax:</td><td style="color: #111827; text-align: right; white-space: nowrap; padding-bottom: 8px;">$invoice.tax</td></tr><tr style="font-size: 18px; font-weight: bold;"><td style="color: #6B7280; text-align: right; white-space: nowrap; padding-right: 20px; padding-bottom: 8px;">Total:</td><td style="color: #111827; text-align: right; white-space: nowrap; padding-bottom: 8px;">$invoice.total</td></tr><tr style="font-size: 13px; font-weight: normal;"><td style="color: #6B7280; text-align: right; white-space: nowrap; padding-right: 20px; padding-bottom: 8px;">Amount Paid:</td><td style="color: #111827; text-align: right; white-space: nowrap; padding-bottom: 8px;">$invoice.paid_to_date</td></tr><tr style="font-size: 13px; font-weight: normal;"><td style="color: #6B7280; text-align: right; white-space: nowrap; padding-right: 20px; padding-bottom: 8px;">Balance Due:</td><td style="color: #DC2626; text-align: right; white-space: nowrap; padding-bottom: 8px;">$invoice.balance</td></tr></tbody></table></div>
</div>

    </div>
</body>
</html>